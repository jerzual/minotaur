(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const v of u.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function e(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(s){if(s.ep)return;s.ep=!0;const u=e(s);fetch(s.href,u)}})();const V=8,J=36,Q=24,W=5,j=8,$=7,R=1,Y=480,B=16,U=1;/**
 * Seedable random number generator functions.
 * @version 1.0.0
 * @license Public Domain
 *
 * @example
 * var rng = new RNG('Example');
 * rng.random(40, 50);  // =>  42
 * rng.uniform();       // =>  0.7972798995050903
 * rng.normal();        // => -0.6698504543216376
 * rng.exponential();   // =>  1.0547367609131555
 * rng.poisson(4);      // =>  2
 * rng.gamma(4);        // =>  2.781724687386858
 */class k{constructor(t){this.s=new Array(256),this.i=0,this.j=0;for(var e=0;e<256;e++)this.s[e]=e;t&&this.mix(t)}static getStringBytes(t){for(var e=[],i=0;i<t.length;i++){var s=t.charCodeAt(i),u=[];do u.push(s&255),s=s>>8;while(s>0);e=e.concat(u.reverse())}return e}_swap(t,e){var i=this.s[t];this.s[t]=this.s[e],this.s[e]=i}mix(t){for(var e=k.getStringBytes(t),i=0,s=0;s<this.s.length;s++)i+=this.s[s]+e[s%e.length],i%=256,this._swap(s,i)}next(){return this.i=(this.i+1)%256,this.j=(this.j+this.s[this.i])%256,this._swap(this.i,this.j),this.s[(this.s[this.i]+this.s[this.j])%256]}}class C{constructor(t){t==null?t=""+Math.random()+Date.now():typeof t=="function"?(this.uniform=t,this.nextByte=function(){return~~(this.uniform()*256)},t=null):Object.prototype.toString.call(t)!=="[object String]"&&(t=JSON.stringify(t)),this._normal=null,t?this._state=new k(t):this._state=null}nextByte(){return this._state.next()}uniform(){for(var t=7,e=0,i=0;i<t;i++)e*=256,e+=this.nextByte();return e/(Math.pow(2,t*8)-1)}random(t=null,e){return t==null?this.uniform():(e==null&&(e=t,t=0),t+Math.floor(this.uniform()*(e-t)))}normal(){if(this._normal!==null){var t=this._normal;return this._normal=null,t}else{var e=this.uniform()||Math.pow(2,-53),i=this.uniform();return this._normal=Math.sqrt(-2*Math.log(e))*Math.sin(2*Math.PI*i),Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*i)}}exponential(){return-Math.log(this.uniform()||Math.pow(2,-53))}poisson(t){var e=Math.exp(-(t||1)),i=0,s=1;do i++,s*=this.uniform();while(s>e);return i-1}gamma(t){var e=(t<1?1+t:t)-.3333333333333333,i=1/Math.sqrt(9*e);do{do var s=this.normal(),u=Math.pow(i*s+1,3);while(u<=0);var v=this.uniform(),T=Math.pow(s,2)}while(v>=1-.0331*T*T&&Math.log(v)>=.5*T+e*(1-u+Math.log(u)));return t<1?e*u*Math.exp(this.exponential()/-t):e*u}roller(t,e){var i=t.split(/(\d+)?d(\d+)([+-]\d+)?/).slice(1),s=parseFloat(i[0])||1,u=parseFloat(i[1]),v=parseFloat(i[2])||0;return e=e||new C,function(){for(var T=s+v,M=0;M<s;M++)T+=e.random(u);return T}}}C.$=new C;const q=8,H="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";class I{constructor(t){this.string=t?t.string:I.randomString(),this.rng=new C(this.string)}static randomString(){var t="";for(let e=0;e<q;e++)t+=H.charAt(Math.floor(Math.random()*H.length));return t}static dailyString(){let e=new Date().toISOString().replace(/-/,"").replace(/-/,""),i=e.substring(0,3)+e.substring(5,6)+e.substring(7,8);return new I({string:i})}static seededRandomString(t){var e="";for(let i=0;i<q;i++)e+=H.charAt(Math.floor(t.random()*H.length));return new I({string:e})}}class z{constructor(t){this.x=t.x,this.y=t.y,this.isBlock=!0,this.isPlaced=t.isPlaced||!1}toString(){return`(${this.x},${this.y})`}collide(t){}}class X{constructor(t){this.seed=t.seed,this.index=t.index,this.tiles=[[]],this.rooms=[]}initialize(t,e){this.width=t,this.height=e,this.tiles=[];for(let i=0;i<this.width;i++){this.tiles[i]=[];for(let s=0;s<this.height;s++)this.tiles[i][s]=new z({x:i,y:s})}}getTileAt(t,e){if(t>=0&&t<this.width&&e>=0&&e<this.height)return this.tiles[t][e]}toDiggableGrid(){let t=[];for(let e=0;e<this.height;e++){t[e]=[];for(let i=0;i<this.width;i++){let s=0,u=this.tiles[i][e];(!u.isPlaced||u.isDoor)&&(s=1),t[e][i]=s}}return t}toWalkableGrid(){}}class N extends z{constructor(t){super(t),this.isBlock=!1,this.isWall=!1,this.isDoor=!0}collide(t){}open(){}close(){}}class tt{constructor(t){this.top=t.top,this.left=t.left,this.width=t.width,this.height=t.height,this.isPositioned=!1,this.isCompleted=!1,this.tiles=t.tiles||[],this.doors=t.doors||[],this.entities=t.entities||[]}}class et{constructor(t){this.rng=t.rng,this.room=new tt({top:0,left:0}),this.room.index=t.index}generateRandomSize(){this.room.width=this.rng.random(W,j),this.room.height=this.rng.random(W,j)}build(){return this.generateRandomSize(),this.room}}var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nt(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var st=function(){this.pointsToAvoid={},this.startX,this.callback,this.startY,this.endX,this.endY,this.nodeHash={},this.openList},rt=function(p,t,e,i,s){this.parent=p,this.x=t,this.y=e,this.costSoFar=i,this.simpleDistanceToTarget=s,this.bestGuessDistance=function(){return this.costSoFar+this.simpleDistanceToTarget}},K={exports:{}};(function(p,t){(function(){var e,i,s,u,v,T,M,P,_,S,A,m,D,O,x;s=Math.floor,S=Math.min,i=function(l,a){return l<a?-1:l>a?1:0},_=function(l,a,h,f,o){var r;if(h==null&&(h=0),o==null&&(o=i),h<0)throw new Error("lo must be non-negative");for(f==null&&(f=l.length);h<f;)r=s((h+f)/2),o(a,l[r])<0?f=r:h=r+1;return[].splice.apply(l,[h,h-h].concat(a)),a},T=function(l,a,h){return h==null&&(h=i),l.push(a),O(l,0,l.length-1,h)},v=function(l,a){var h,f;return a==null&&(a=i),h=l.pop(),l.length?(f=l[0],l[0]=h,x(l,0,a)):f=h,f},P=function(l,a,h){var f;return h==null&&(h=i),f=l[0],l[0]=a,x(l,0,h),f},M=function(l,a,h){var f;return h==null&&(h=i),l.length&&h(l[0],a)<0&&(f=[l[0],a],a=f[0],l[0]=f[1],x(l,0,h)),a},u=function(l,a){var h,f,o,r,n,c;for(a==null&&(a=i),r=(function(){c=[];for(var d=0,g=s(l.length/2);0<=g?d<g:d>g;0<=g?d++:d--)c.push(d);return c}).apply(this).reverse(),n=[],f=0,o=r.length;f<o;f++)h=r[f],n.push(x(l,h,a));return n},D=function(l,a,h){var f;if(h==null&&(h=i),f=l.indexOf(a),f!==-1)return O(l,0,f,h),x(l,f,h)},A=function(l,a,h){var f,o,r,n,c;if(h==null&&(h=i),o=l.slice(0,a),!o.length)return o;for(u(o,h),c=l.slice(a),r=0,n=c.length;r<n;r++)f=c[r],M(o,f,h);return o.sort(h).reverse()},m=function(l,a,h){var f,o,r,n,c,d,g,b,w;if(h==null&&(h=i),a*10<=l.length){if(r=l.slice(0,a).sort(h),!r.length)return r;for(o=r[r.length-1],g=l.slice(a),n=0,d=g.length;n<d;n++)f=g[n],h(f,o)<0&&(_(r,f,0,null,h),r.pop(),o=r[r.length-1]);return r}for(u(l,h),w=[],c=0,b=S(a,l.length);0<=b?c<b:c>b;0<=b?++c:--c)w.push(v(l,h));return w},O=function(l,a,h,f){var o,r,n;for(f==null&&(f=i),o=l[h];h>a;){if(n=h-1>>1,r=l[n],f(o,r)<0){l[h]=r,h=n;continue}break}return l[h]=o},x=function(l,a,h){var f,o,r,n,c;for(h==null&&(h=i),o=l.length,c=a,r=l[a],f=2*a+1;f<o;)n=f+1,n<o&&!(h(l[f],l[n])<0)&&(f=n),l[a]=l[f],a=f,f=2*a+1;return l[a]=r,O(l,c,a,h)},e=function(){l.push=T,l.pop=v,l.replace=P,l.pushpop=M,l.heapify=u,l.updateItem=D,l.nlargest=A,l.nsmallest=m;function l(a){this.cmp=a??i,this.nodes=[]}return l.prototype.push=function(a){return T(this.nodes,a,this.cmp)},l.prototype.pop=function(){return v(this.nodes,this.cmp)},l.prototype.peek=function(){return this.nodes[0]},l.prototype.contains=function(a){return this.nodes.indexOf(a)!==-1},l.prototype.replace=function(a){return P(this.nodes,a,this.cmp)},l.prototype.pushpop=function(a){return M(this.nodes,a,this.cmp)},l.prototype.heapify=function(){return u(this.nodes,this.cmp)},l.prototype.updateItem=function(a){return D(this.nodes,a,this.cmp)},l.prototype.clear=function(){return this.nodes=[]},l.prototype.empty=function(){return this.nodes.length===0},l.prototype.size=function(){return this.nodes.length},l.prototype.clone=function(){var a;return a=new l,a.nodes=this.nodes.slice(0),a},l.prototype.toArray=function(){return this.nodes.slice(0)},l.prototype.insert=l.prototype.push,l.prototype.top=l.prototype.peek,l.prototype.front=l.prototype.peek,l.prototype.has=l.prototype.contains,l.prototype.copy=l.prototype.clone,l}(),function(l,a){return p.exports=a()}(this,function(){return e})}).call(it)})(K);var lt=K.exports,ot=lt,y={},at=st,ht=rt,ut=ot;const ft=0,ct=1;var dt=y,gt=1;y.js=function(){var p=1,t=1.4,e=!1,i={},s,u={},v={},T={},M=!0,P,_={},S=[],A=Number.MAX_VALUE,m,D=!1;this.setAcceptableTiles=function(o){o instanceof Array?m=o:!isNaN(parseFloat(o))&&isFinite(o)&&(m=[o])},this.enableSync=function(){e=!0},this.disableSync=function(){e=!1},this.enableDiagonals=function(){D=!0},this.disableDiagonals=function(){D=!1},this.setGrid=function(o){s=o;for(var r=0;r<s.length;r++)for(var n=0;n<s[0].length;n++)u[s[r][n]]||(u[s[r][n]]=1)},this.setTileCost=function(o,r){u[o]=r},this.setAdditionalPointCost=function(o,r,n){v[r]===void 0&&(v[r]={}),v[r][o]=n},this.removeAdditionalPointCost=function(o,r){v[r]!==void 0&&delete v[r][o]},this.removeAllAdditionalPointCosts=function(){v={}},this.setDirectionalCondition=function(o,r,n){T[r]===void 0&&(T[r]={}),T[r][o]=n},this.removeAllDirectionalConditions=function(){T={}},this.setIterationsPerCalculation=function(o){A=o},this.avoidAdditionalPoint=function(o,r){i[r]===void 0&&(i[r]={}),i[r][o]=1},this.stopAvoidingAdditionalPoint=function(o,r){i[r]!==void 0&&delete i[r][o]},this.enableCornerCutting=function(){M=!0},this.disableCornerCutting=function(){M=!1},this.stopAvoidingAllAdditionalPoints=function(){i={}},this.findPath=function(o,r,n,c,d){var g=function(G){e?d(G):setTimeout(function(){d(G)})};if(m===void 0)throw new Error("You can't set a path without first calling setAcceptableTiles() on EasyStar.");if(s===void 0)throw new Error("You can't set a path without first calling setGrid() on EasyStar.");if(o<0||r<0||n<0||c<0||o>s[0].length-1||r>s.length-1||n>s[0].length-1||c>s.length-1)throw new Error("Your start or end point is outside the scope of your grid.");if(o===n&&r===c){g([]);return}for(var b=s[c][n],w=!1,L=0;L<m.length;L++)if(b===m[L]){w=!0;break}if(w===!1){g(null);return}var E=new at;E.openList=new ut(function(G,Z){return G.bestGuessDistance()-Z.bestGuessDistance()}),E.isDoneCalculating=!1,E.nodeHash={},E.startX=o,E.startY=r,E.endX=n,E.endY=c,E.callback=g,E.openList.push(h(E,E.startX,E.startY,null,p));var F=gt++;return _[F]=E,S.push(F),F},this.cancelPath=function(o){return o in _?(delete _[o],!0):!1},this.calculate=function(){if(!(S.length===0||s===void 0||m===void 0))for(P=0;P<A;P++){if(S.length===0)return;e&&(P=0);var o=S[0],r=_[o];if(typeof r>"u"){S.shift();continue}if(r.openList.size()===0){r.callback(null),delete _[o],S.shift();continue}var n=r.openList.pop();if(r.endX===n.x&&r.endY===n.y){var c=[];c.push({x:n.x,y:n.y});for(var d=n.parent;d!=null;)c.push({x:d.x,y:d.y}),d=d.parent;c.reverse();var g=c;r.callback(g),delete _[o],S.shift();continue}n.list=ft,n.y>0&&O(r,n,0,-1,p*a(n.x,n.y-1)),n.x<s[0].length-1&&O(r,n,1,0,p*a(n.x+1,n.y)),n.y<s.length-1&&O(r,n,0,1,p*a(n.x,n.y+1)),n.x>0&&O(r,n,-1,0,p*a(n.x-1,n.y)),D&&(n.x>0&&n.y>0&&(M||x(s,m,n.x,n.y-1,n)&&x(s,m,n.x-1,n.y,n))&&O(r,n,-1,-1,t*a(n.x-1,n.y-1)),n.x<s[0].length-1&&n.y<s.length-1&&(M||x(s,m,n.x,n.y+1,n)&&x(s,m,n.x+1,n.y,n))&&O(r,n,1,1,t*a(n.x+1,n.y+1)),n.x<s[0].length-1&&n.y>0&&(M||x(s,m,n.x,n.y-1,n)&&x(s,m,n.x+1,n.y,n))&&O(r,n,1,-1,t*a(n.x+1,n.y-1)),n.x>0&&n.y<s.length-1&&(M||x(s,m,n.x,n.y+1,n)&&x(s,m,n.x-1,n.y,n))&&O(r,n,-1,1,t*a(n.x-1,n.y+1)))}};var O=function(o,r,n,c,d){var g=r.x+n,b=r.y+c;if((i[b]===void 0||i[b][g]===void 0)&&x(s,m,g,b,r)){var w=h(o,g,b,r,d);w.list===void 0?(w.list=ct,o.openList.push(w)):r.costSoFar+d<w.costSoFar&&(w.costSoFar=r.costSoFar+d,w.parent=r,o.openList.updateItem(w))}},x=function(o,r,n,c,d){var g=T[c]&&T[c][n];if(g){var b=l(d.x-n,d.y-c),w=function(){for(var E=0;E<g.length;E++)if(g[E]===b)return!0;return!1};if(!w())return!1}for(var L=0;L<r.length;L++)if(o[c][n]===r[L])return!0;return!1},l=function(o,r){if(o===0&&r===-1)return y.TOP;if(o===1&&r===-1)return y.TOP_RIGHT;if(o===1&&r===0)return y.RIGHT;if(o===1&&r===1)return y.BOTTOM_RIGHT;if(o===0&&r===1)return y.BOTTOM;if(o===-1&&r===1)return y.BOTTOM_LEFT;if(o===-1&&r===0)return y.LEFT;if(o===-1&&r===-1)return y.TOP_LEFT;throw new Error("These differences are not valid: "+o+", "+r)},a=function(o,r){return v[r]&&v[r][o]||u[s[r][o]]},h=function(o,r,n,c,d){if(o.nodeHash[n]!==void 0){if(o.nodeHash[n][r]!==void 0)return o.nodeHash[n][r]}else o.nodeHash[n]={};var g=f(r,n,o.endX,o.endY);if(c!==null)var b=c.costSoFar+d;else b=0;var w=new ht(c,r,n,b,g);return o.nodeHash[n][r]=w,w},f=function(o,r,n,c){if(D){var d=Math.abs(o-n),g=Math.abs(r-c);return d<g?t*d+g:t*g+d}else{var d=Math.abs(o-n),g=Math.abs(r-c);return d+g}}};y.TOP="TOP";y.TOP_RIGHT="TOP_RIGHT";y.RIGHT="RIGHT";y.BOTTOM_RIGHT="BOTTOM_RIGHT";y.BOTTOM="BOTTOM";y.BOTTOM_LEFT="BOTTOM_LEFT";y.LEFT="LEFT";y.TOP_LEFT="TOP_LEFT";const pt=nt(dt);class vt{constructor(t){this.seed=t,this.rng=t.rng,this.easystar=new pt.js,this.level=new X({seed:t.string}),this.difficulty=1}withSize(t,e){this.level.initialize(t,e)}withDifficulty(t){this.difficulty=t}createRooms(t=6){for(let e=0;e<this.rng.random($,$+t);e++){let i=new et({rng:this.rng,index:e}).build();for(let s=0;s<Y;s++)if(i.left=Math.floor(this.rng.random(1,this.level.width-i.width-1)),i.top=Math.floor(this.rng.random(1,this.level.height-i.height-1)),this.canBePlaced(i)){this.placeRoomInDungeon(i),this.digWalls(i),this.placeDoors(this.rng,i),i.isPositioned=!0,this.level.rooms.push(i);break}}}placeRoomInDungeon(t){for(let e=0;e<t.width;e++)for(let i=0;i<t.height;i++){let s=this.level.getTileAt(t.left+e,t.top+i);s.isPlaced=!0,s.isBlock=!1}}canBePlaced(t){console.log("checking if room can be placed in dungeon");let e=!0;for(let i=-R;i<t.width+R;i++)for(let s=-R;s<t.height+R;s++){let u=this.level.getTileAt(t.left+i,t.top+s);u&&u.isPlaced&&(e=e&&!1)}return e}digWalls(t){for(let e=0;e<t.width;e++)for(let i=0;i<t.height;i++)(e==0||e==t.width-1||i==0||i==t.height-1)&&(this.level.getTileAt(t.left+e,t.top+i).isWall=!0)}placeDoors(t,e){var i=t.random(1,3.2);for(let s=0;s<i;s++){let u={x:e.left+Math.floor(t.random()*(e.width-2))+1,y:e.top+Math.floor(t.random()*(e.height-2))+1};s==0&&(u.x=e.left),s==1&&(u.x=e.left+e.width-1),s==2&&(u.y=e.top+e.height-1),s==3&&(u.y=e.top);let v=this.level.getTileAt(u.x,u.y);v=new N(u),this.level.tiles[u.x][u.y]=v,e.doors.push(v)}}connectDoors(){this.level.rooms.forEach(t=>{t.doors.forEach(e=>{e.isConnected=!0;let i=this.level.rooms.map(s=>s.doors).reduce((s,u)=>s.concat(u),[]).filter(s=>!s.isConnected);if(i.length){let s=i[0];s.isConnected=!0,console.log(`path from ${e.x},${e.y} to ${s.x},${s.y}`);try{this.easystar.setGrid(this.level.toDiggableGrid()),this.easystar.setAcceptableTiles([1]),this.easystar.findPath(e.x,e.y,s.x,s.y,u=>{u&&u.forEach(v=>{let T=this.level.getTileAt(v.x,v.y);T.isBlock=!1})}),this.easystar.calculate()}catch(u){console.warn(u.message)}}})})}build(){return this.createRooms(),this.connectDoors(),this.level.index=this.difficulty,this.level}}class Tt{constructor(t){Object.assign(this,t),this.levels=[],this.player={}}}class wt{constructor(t){Object.assign(this,t),this.components=[],this.inventory=[],this.sprites=[],this.bodies=[]}}class mt extends wt{constructor(t){super(t),this.position={},this.direction={}}setPosition(t,e){this.position={x:t,y:e}}move(){}}const yt=32,bt=24;class Et{constructor(t){this.dungeon=new Tt,this.rng=t.rng}generatePlayer(){new mt().setPosition()}generateLevels(t=7){for(let e=1;e<=t;e++){let i=new vt(I.seededRandomString(this.rng));i.withDifficulty(e),i.withSize(yt*Math.floor(this.rng.random(1,e)),bt*Math.floor(this.rng.random(1,e))),this.dungeon.levels.push(i.build())}}build(){return this.generateLevels(3),this.generatePlayer(),this.dungeon}}class xt{constructor(t){this.level=t.dungeon,this.colors={red:"rgb(170,57,57)",green:"rgb(122,159,53)",blue:"rgb(34,102,102)",orange:"rgb(170,108,57)",purple:"rgb(136,45,96)",EMPTY_TILE:"rgb(138,138,138)",WALL_TILE:"rgb(53,53,53)",BACKGROUND:"rgb(25,25,25)",grid:"rgb(0,0,0)",chest:"rgb()",blood:"rgb(128,21,21)",trap:"rgb(255,0,0)",player:"rgb(255,255,255)",tile:"rgb(128,128,128)",empty:"rgb(0,0,0)"},this.canvas=t.canvas,this.context=this.canvas.getContext("2d"),this.gridEnabled=!1,this.resizeHandler()}resizeHandler(){this.canvas.width=this.level.width*this.getTileSize(),this.canvas.height=this.level.height*this.getTileSize()}getTileSize(){return B+(this.gridEnabled?U:0)}clearCanvas(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}draw(){var t=this.context;t.clearRect(0,0,window.innerWidth,window.innerHeight),this.level.tiles.forEach(e=>{e.forEach(i=>{this.drawTile(i)})}),this.gridEnabled&&this.drawGrid()}drawCircle(t,e,i){var s=this.context;s.beginPath(),s.fillStyle=i,s.beginPath(),s.arc(t*this.getTileSize(),e*this.getTileSize(),B,0,2*Math.PI),s.fill()}drawRectangle(t,e,i){var s=this.context;s.beginPath(),s.fillStyle=i,s.fillRect(t*this.getTileSize(),e*this.getTileSize(),B,B)}drawTile(t){let e=this.colors.BACKGROUND;t.isBlock||(e=this.colors.EMPTY_TILE),t.isWall&&(e=this.colors.WALL_TILE),t.isDoor&&(e=this.colors.orange),this.drawRectangle(t.x,t.y,e)}drawGrid(){var t=this.context;t.strokeStyle=this.colors.grid,t.lineWidth=U,t.beginPath(),t.strokeStyle=this.colors.grid;for(let e=1;e<=this.level.width;e++){let i=e*this.getTileSize();t.moveTo(i,0),t.lineTo(i,this.level.height*this.getTileSize())}for(let e=1;e<=this.level.height;e++){let i=e*this.getTileSize();t.moveTo(0,i),t.lineTo(this.level.width*this.getTileSize(),i)}t.stroke()}drawChest(t){this.drawTile(new z({x:t.x,y:t.y,c:this.colors.chest}))}drawPlayer(t){this.drawCircle(t.position.top,t.position.left,this.colors.yellow)}}class Mt{constructor(t){this.canvas=t,this.initialize(),this.renderers=[]}generate(){this.seed=new I({string:this.input.value}),this.dungeon=new Et(this.seed).build();const t=document.createElement("div");t.id=this.seed,t.classList.add("map-container"),this.renderers=this.dungeon.levels.map(e=>{let i=document.createElement("canvas");return i.id=`dungeon-${this.seed.string}-level-${e.index}`,i.width=e.width,i.height=e.height,t.appendChild(i),new xt({dungeon:e,canvas:i})}),document.body.appendChild(t),this.needsUpdate=!0}reload(){console.log("reload"),this.seed=new I().string,this.input.value=this.seed}submit(t){console.log("submit"),t.preventDefault(),t.stopImmediatePropagation()}click(t){console.log(t);let e={x:Math.floor(t.clientX/t.target.width*J),y:Math.floor(t.offsetY/t.target.height*Q)};console.log(e)}animate(){this.renderers&&this.renderers.forEach(t=>{t.clearCanvas(),t.draw()}),requestAnimationFrame(()=>{this.animate()})}initialize(){this.input=document.getElementById("seed"),this.input.maxLength=V,this.input.value=new I().string,document.getElementById("seed-input").addEventListener("submit",t=>{this.submit(t)}),document.getElementById("reload").addEventListener("click",t=>{this.reload()}),document.getElementById("canvasView").addEventListener("click",t=>{this.click(t)}),document.getElementById("generate").addEventListener("click",t=>{this.generate()}),this.animate()}}document.addEventListener("DOMContentLoaded",p=>{new Mt(document.getElementById("minotaur")).initialize()});
